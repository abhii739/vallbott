<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Valentine Bot ðŸ’–</title>

<style>
/* (your full CSS stays SAME â€” unchanged) */
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:linear-gradient(135deg,#ffdde1,#ee9ca7);
    overflow:hidden;
    text-align:center;
    transition:background 0.8s ease,color 0.8s ease;
}
body.dark{
    background:linear-gradient(135deg,#0f0f0f,#2b2b2b);
    color:#ccc;
}
.chatbox{ position:relative; z-index:50; margin-top:80px; }
input{ padding:12px 18px; width:220px; border-radius:12px; border:none; outline:none; }
button{ padding:12px 18px; border-radius:12px; border:none; background:crimson; color:white; cursor:pointer; font-weight:bold; }
#reply{ margin-top:20px; font-size:22px; font-weight:bold; }

/* animations (same as yours) */
.heart{ position:fixed; bottom:-20px; animation:floatUp 6s linear forwards; color:red; z-index:1; }
@keyframes floatUp{ to{ transform:translateY(-100vh); opacity:0;} }

.confetti{ position:fixed; width:8px; height:8px; animation:fall 3s linear forwards; z-index:30; }
@keyframes fall{ to{ transform:translateY(110vh) rotate(720deg); opacity:0;} }

.burst{ position:fixed; font-size:22px; animation:explode 1.2s ease-out forwards; z-index:40; }
@keyframes explode{ to{ transform:translate(var(--x), var(--y)) scale(0.3); opacity:0;} }

.celebrate-text{ position:fixed; top:40%; width:100%; font-size:40px; font-weight:bold; color:white; text-shadow:0 0 20px red; animation:pop 0.9s ease; z-index:60; }
@keyframes pop{ 0%{transform:scale(0);} 60%{transform:scale(1.3);} 100%{transform:scale(1);} }

.broken{ position:fixed; top:-20px; animation:fallDown 6s linear forwards; color:#8b0000; z-index:20; }
@keyframes fallDown{ to{ transform:translateY(110vh) rotate(180deg); opacity:0;} }
</style>
</head>

<body>

<div class="chatbox">
    <h2>ðŸ’˜ Valentine Chatbot ðŸ’˜</h2>
    <input id="msg" placeholder="Type yes or no" />
    <button onclick="send()">Send</button>
    <p id="reply"></p>
</div>

<script>

/* =========================
   SEND â†’ CALL FLASK BACKEND
========================= */
async function send(){

    let message = document.getElementById("msg").value;

    if(!message) return;

    /* ðŸ”¥ CALL FLASK */
    const res = await fetch("/chat", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ message: message })
    });

    const data = await res.json();
    let reply = data.reply;

    document.getElementById("reply").innerText = reply;

    let lower = message.toLowerCase();

    if(lower.includes("yes")){
        document.body.classList.remove("dark");
        celebrate();
    }
    else if(lower.includes("no")){
        heartbreak();
    }

    document.getElementById("msg").value="";
}


/* FLOATING HEARTS */
function createHeart(){
    const h=document.createElement("div");
    h.className="heart";
    h.innerHTML="â¤";
    h.style.left=Math.random()*100+"vw";
    h.style.fontSize=(Math.random()*20+10)+"px";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),6000);
}
setInterval(createHeart,200);


/* CELEBRATE */
function celebrate(){

    const text=document.createElement("div");
    text.className="celebrate-text";
    text.innerHTML="I love you more than yesterday ðŸ’˜";
    document.body.appendChild(text);
    setTimeout(()=>text.remove(),5000);

    for(let i=0;i<100;i++){
        const c=document.createElement("div");
        c.className="confetti";
        c.style.background=["red","pink","white"][Math.floor(Math.random()*3)];
        c.style.left=Math.random()*100+"vw";
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),3000);
    }
}


/* HEARTBREAK */
function heartbreak(){

    document.body.classList.add("dark");

    const text=document.createElement("div");
    text.className="celebrate-text";
    text.innerHTML="Maybe someday... ðŸ’”";
    text.style.color="#aaa";
    document.body.appendChild(text);
    setTimeout(()=>text.remove(),4000);

    for(let i=0;i<50;i++){
        const b=document.createElement("div");
        b.className="broken";
        b.innerHTML="ðŸ’”";
        b.style.left=Math.random()*100+"vw";
        document.body.appendChild(b);
        setTimeout(()=>b.remove(),6000);
    }
}

</script>

</body>
</html>
